{"version":3,"file":"token-attractor.js","sources":["../src/module/util/constants.ts","../src/module/util/setup/settings.ts","../src/module/util/setup/handlebars.ts","../src/module/util/setup/hooks.ts","../src/module/token-attractor.ts"],"sourcesContent":["export const MODULE_NAME = 'token-attractor' as const;\n","import { MODULE_NAME } from '../constants.js';\n\nexport function registerSettings(): void {\n  game.settings.register(MODULE_NAME, 'st-characteristic', {\n    scope: 'world',\n    type: String,\n    default: 'data.ST.val',\n    name: 'What characteristic we are looking for Strenght',\n    hint: 'Streght value to check the amount of space the token will move',\n    config: true,\n  });\n}\n","export function registerHelpers(): void {\n  Handlebars.registerHelper('gurpslink', GURPS.gurpslink);\n  Handlebars.registerHelper('isEmptyString', (string: string) => string === '');\n  Handlebars.registerHelper('get', (obj, prop) => obj[prop]);\n  Handlebars.registerHelper('ifEquals', function (arg1, arg2, options) {\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore\n    return arg1 == arg2 ? options.fn(this) : options.inverse(this);\n  });\n}\n","import { registerSettings } from './settings.js';\nimport { registerHelpers } from './handlebars.js';\nimport { MODULE_NAME } from '../constants.js';\n\nexport function registerHooks(): void {\n  // Initialize module\n  Hooks.once('init', async () => {\n    console.log('token-attractor | Initializing token-attractor');\n\n    // Register custom module settings\n    registerSettings();\n\n    // register Handlebars helpers and partials\n    registerHelpers();\n  });\n\n  Hooks.on('renderTokenConfig', (app: any, html: any, data: any) => {\n    if (!game?.user?.isGM) return;\n    const toggleHTML = `<div class=\"form-group\">\n  <label>${game.i18n.localize('patrol.tokenConfig.enablePatrol.name')}</label>\n  <input type=\"checkbox\" name=\"flags.${MODULE_NAME}.isAttractor\" data-dtype=\"Boolean\">\n</div>\n<div class=\"form-group\">\n  <label>${game.i18n.localize('patrol.tokenConfig.enableSpotting.name')}</label>\n  <input type=\"checkbox\" name=\"flags.${MODULE_NAME}.enableSpotting\" data-dtype=\"Boolean\">\n</div>\n<div class=\"form-group\">\n  <label>${game.i18n.localize('patrol.tokenConfig.makePatroller.name')}</label>\n  <input type=\"checkbox\" name=\"flags.${MODULE_NAME}.makePatroller\" data-dtype=\"Boolean\">\n  <label>${game.i18n.localize('patrol.tokenConfig.multiPath.name')}</label>\n  <input type=\"checkbox\" name=\"flags.${MODULE_NAME}.multiPath\" data-dtype=\"Boolean\">\n</div>\n<div class=\"form-group\">\n  <label>${game.i18n.localize('patrol.tokenConfig.patrolPathName.name')}</label>\n  <input type=\"text\" name=\"flags.${MODULE_NAME}.patrolPathName\" value=\"\">\n  <label> ${game.i18n.localize('patrol.tokenConfig.pathNodeIndex.name')} </label>\n  <input type=\"text\" name=\"flags.${MODULE_NAME}.pathNodeIndex\" value=\"\">\n</div>\n`;\n    const lockrotation = html.find(\"input[name='lockRotation']\");\n    const formGroup = lockrotation.closest('.form-group');\n    formGroup.after(toggleHTML);\n    html.find(`input[name ='flags.${MODULE_NAME}.enablePatrol']`)[0].checked =\n      app.token.getFlag(MODULE_NAME, 'enablePatrol') || false;\n    html.find(`input[name ='flags.${MODULE_NAME}.enableSpotting']`)[0].checked =\n      app.token.getFlag(MODULE_NAME, 'enableSpotting') || false;\n    html.find(`input[name ='flags.${MODULE_NAME}.makePatroller']`)[0].checked =\n      app.token.getFlag(MODULE_NAME, 'makePatroller') || false;\n    html.find(`input[name ='flags.${MODULE_NAME}.multiPath']`)[0].checked =\n      app.token.getFlag(MODULE_NAME, 'multiPath') || false;\n    html.find(`input[name = 'flags.${MODULE_NAME}.patrolPathName']`)[0].value =\n      app.token.getFlag(MODULE_NAME, 'patrolPathName') || '';\n    html.find(`input[name = 'flags.${MODULE_NAME}.pathNodeIndex']`)[0].value =\n      app.token.getFlag(MODULE_NAME, 'pathNodeIndex') || 0;\n  });\n}\n","// Import TypeScript modules\nimport { registerHooks } from './util/setup/hooks.js';\n\nlet appId = '';\nappId = '3';\nconst globals = {\n  appId,\n};\n\ndeclare global {\n  const EasyCombat: typeof globals;\n  interface Window {\n    EasyCombat: typeof globals;\n  }\n  interface LenientGlobalVariableTypes {\n    game: Game;\n  }\n}\n\nwindow.EasyCombat = globals;\n\nregisterHooks();\n"],"names":[],"mappings":"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"}