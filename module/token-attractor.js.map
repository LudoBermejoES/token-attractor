{"version":3,"file":"token-attractor.js","sources":["../src/module/util/constants.ts","../src/module/util/setup/settings.ts","../src/module/util/setup/handlebars.ts","../src/module/scripts/systems/gurps.ts","../src/module/scripts/system.ts","../src/module/scripts/attractor.ts","../src/module/scripts/roller.ts","../src/module/util/setup/socketkib.ts","../src/module/util/miscellaneous.ts","../src/module/util/priorities.ts","../src/module/util/setup/hooks.ts","../src/module/token-attractor.ts"],"sourcesContent":["export const MODULE_NAME = 'token-attractor' as const;\n","import { MODULE_NAME } from '../constants.js';\n\nexport function registerSettings(): void {\n  game.settings.register(MODULE_NAME, 'only-in-combat', {\n    scope: 'world',\n    type: Boolean,\n    default: true,\n    name: 'Only attract in combat',\n    hint: 'The vortex will only attract tokens when they are in combat mode',\n    config: true,\n  });\n}\n","export function registerHelpers(): void {\n  Handlebars.registerHelper('gurpslink', GURPS.gurpslink);\n  Handlebars.registerHelper('isEmptyString', (string: string) => string === '');\n  Handlebars.registerHelper('get', (obj, prop) => obj[prop]);\n  Handlebars.registerHelper('ifEquals', function (arg1, arg2, options) {\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore\n    return arg1 == arg2 ? options.fn(this) : options.inverse(this);\n  });\n}\n","export default class GURPSRoll {\n  roll = 'ST';\n\n  async rollAgainstAttractor(actor: Actor, minus = 0): Promise<any> {\n    const roll = minus < 0 ? `[ST${minus}]` : `[ST+${minus}]`;\n    return GURPS.executeOTF(roll, false, null, actor);\n  }\n}\n","import GURPSRoll from './systems/gurps';\n\nexport default class System {\n  getSystemEnabled(): boolean {\n    const system = game.system.id.toUpperCase();\n    if (system === 'GURPS') return true;\n    return false;\n  }\n\n  async rollAgainstAttractor(actor: Actor, minus: number): Promise<any> {\n    const system = game.system.id.toUpperCase();\n\n    if (system === 'GURPS') {\n      const roller: GURPSRoll = new GURPSRoll();\n      return roller.rollAgainstAttractor(actor, minus);\n    }\n    return undefined;\n  }\n}\n","import { MODULE_NAME } from '../util/constants';\nimport System from './system';\n\nexport default class Attractor {\n  started: boolean;\n  delay: number;\n  timer: any;\n  system: System;\n\n  constructor() {\n    this.system = new System();\n    this.started = false;\n    this.delay = 2500;\n    if (!game?.combat?.started) {\n      this.createInterval();\n    }\n  }\n\n  cancelInterval() {\n    clearInterval(this.timer);\n    this.timer = undefined;\n  }\n\n  createInterval() {\n    console.log(this.timer);\n    if (!this.timer) this.timer = setInterval(this.attractCompute.bind(this), this.delay);\n  }\n\n  isTokenAttracted(token: Token): Token[] | false {\n    const result: Token[] = [];\n    const { attractors, attracted } = this.populateTokens();\n    if (attractors.length && attracted.includes(token)) {\n      for (const attractor of attractors) {\n        const stAttraction = String(attractor.document.getFlag(MODULE_NAME, 'distanceAttraction'));\n        const distanceAttraction: number = stAttraction === 'null' ? 5 : Number(stAttraction);\n        const distance = this.getDistance(attractor, token);\n        if (distanceAttraction >= distance) {\n          result.push(attractor);\n        }\n      }\n      if (result.length) return result;\n    }\n    return false;\n  }\n\n  getDistance(attractor: Token, attracted: Token): number {\n    return (\n      game?.canvas?.grid?.measureDistance(\n        { x: attractor.x, y: attractor.y },\n        { x: attracted.x, y: attracted.y },\n        { gridSpaces: true },\n      ) || 0\n    );\n  }\n\n  async attractToken(\n    attractor: Token,\n    attracted1: Token,\n    distanceAttraction: number,\n    maxMoveGridSpeed: number,\n    minMoveGridSpeed: number,\n  ) {\n    const distance: number = this.getDistance(attractor, attracted1);\n\n    if (distance !== 0 && distance <= distanceAttraction) {\n      const calculatedSpeed: number = (maxMoveGridSpeed / distanceAttraction) * (distanceAttraction - distance + 1);\n      const moveGridSpeed: number = calculatedSpeed < minMoveGridSpeed ? minMoveGridSpeed : calculatedSpeed;\n      const speedX = moveGridSpeed * (game?.canvas?.grid?.grid?.w || 0);\n      const speedY = moveGridSpeed * (game?.canvas?.grid?.grid?.h || 0);\n\n      const change: { x: number; y: number } = { x: attracted1.x, y: attracted1.y };\n      const difX = attracted1.x - attractor.x;\n      if (difX !== 0) {\n        const speed = Math.abs(difX) > speedX ? speedX : Math.abs(difX);\n        change.x = attracted1.x + (difX < 0 ? speed : -speed);\n        2;\n      }\n\n      const difY = attracted1.y - attractor.y;\n      if (difY !== 0) {\n        const speed = Math.abs(difY) > speedY ? speedY : Math.abs(difY);\n        change.y = attracted1.y + (difY < 0 ? speed : -speed);\n      }\n      const path = new Ray({ x: attracted1.x, y: attracted1.y }, { x: change.x, y: change.y });\n      await attracted1.animateMovement(path);\n      await attracted1.document.setFlag(MODULE_NAME, 'movementAttracted', true);\n      await attracted1.document.update({ x: change.x, y: change.y, byAttractor: true });\n      await attracted1.document.unsetFlag(MODULE_NAME, 'movementAttracted');\n    }\n  }\n\n  getModifier(attracted: Token, attractor: Token): number {\n    const stAttraction = String(attractor.document.getFlag(MODULE_NAME, 'distanceAttraction'));\n    const distanceAttraction: number = stAttraction === 'null' ? 5 : Number(stAttraction);\n    const distance: number = this.getDistance(attractor, attracted);\n\n    if (distance !== 0 && distance <= distanceAttraction) {\n      const stMinModifier = String(attractor.document.getFlag(MODULE_NAME, 'minModifier'));\n      const stMaxModifier = String(attractor.document.getFlag(MODULE_NAME, 'maxModifier'));\n      const minModifier: number = stMinModifier === 'null' ? 0 : Number(stMinModifier);\n      const maxModifier: number = stMaxModifier === 'null' ? 0 : Number(stMaxModifier);\n\n      const calculatedModifier: number = (maxModifier / distanceAttraction) * (distanceAttraction - distance + 1);\n      const moveModifier: number = Math.round(calculatedModifier);\n      return moveModifier;\n    }\n    return 0;\n  }\n\n  async attractCompute(combatant: Combatant | null | undefined) {\n    if (game?.paused) return;\n\n    if (!combatant && game?.combat?.started) {\n      return;\n    }\n\n    const onlyInCombat: any = game.settings.get('token-attractor', 'only-in-combat');\n    if (onlyInCombat && !game?.combat?.started) {\n      return;\n    }\n\n    this.cancelInterval();\n    this.started = false;\n    const { attractors, attracted } = this.populateTokens();\n    for (const attractor of attractors) {\n      const maxMoveGridSpeed: number = Number(attractor.document.getFlag(MODULE_NAME, 'maxForceAttraction')) || 0.5;\n      const minMoveGridSpeed: number = Number(attractor.document.getFlag(MODULE_NAME, 'minForceAttraction')) || 0.5;\n      const stAttraction = String(attractor.document.getFlag(MODULE_NAME, 'distanceAttraction'));\n      const distanceAttraction: number = stAttraction === 'null' ? 5 : Number(stAttraction);\n      if (!combatant) {\n        for (const attracted1 of attracted) {\n          await this.attractToken(attractor, attracted1, distanceAttraction, maxMoveGridSpeed, minMoveGridSpeed);\n        }\n      } else if (attracted.includes(combatant.token?.object as Token)) {\n        await this.attractToken(\n          attractor,\n          combatant?.token?.object as Token,\n          distanceAttraction,\n          maxMoveGridSpeed,\n          minMoveGridSpeed,\n        );\n      }\n    }\n    this.createInterval();\n  }\n\n  populateTokens(): { attractors: Token[]; attracted: Token[] } {\n    const tokens: Token[] = game?.canvas?.tokens?.placeables || [];\n    const attractors: Token[] = tokens.filter((token: Token) => token.document.getFlag(MODULE_NAME, 'isAttractor'));\n    const attracted: Token[] = tokens.filter((token: Token) => token.document.getFlag(MODULE_NAME, 'isAttracted'));\n    return {\n      attractors,\n      attracted,\n    };\n  }\n}\n","import System from './system';\n\nexport default class Roller {\n  async callForRoll(combatantId: string | undefined, modifier: number): Promise<any> {\n    const system: System = new System();\n    if (!system.getSystemEnabled) return false;\n\n    return new Promise((resolve, reject) => {\n      const d: Dialog = new Dialog({\n        title: game.i18n.localize('tokenAttractor.callForRoll.dialogTitle'),\n        content: `<p>${game.i18n.localize('tokenAttractor.callForRoll.dialogTitle')}</p>`,\n        buttons: {\n          roll: {\n            icon: '<i class=\"fas fa-check\"></i>',\n            label: game.i18n.localize('tokenAttractor.callForRoll.dialogButton'),\n            callback: async () => {\n              const combatant: Combatant | undefined = game.combat?.combatants?.find(\n                (combatant: Combatant) => combatant.id === combatantId,\n              );\n              if (combatant && combatant.actor) {\n                const result = await system.rollAgainstAttractor(combatant.actor, modifier);\n                resolve(result);\n              }\n            },\n          },\n        },\n        render: (html) => console.log('Register interactivity in the rendered dialog'),\n        close: (html) => console.log('This always is logged no matter which option is chosen'),\n      });\n      d.render(true);\n    });\n  }\n}\n","import { MODULE_NAME } from '../constants';\nimport Roller from '../../scripts/roller';\n\nconst functionsToRegister = {\n  callForRoll: (combatantId: string | undefined, modifier: number) => {\n    const roller: Roller = new Roller();\n    return roller.callForRoll(combatantId, modifier);\n  },\n} as const;\n\ninterface SockerLib {\n  registerModule(mudeltName: string): SockerLibSocket;\n}\nexport interface SockerLibSocket {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  register(alias: string, func: (...args: any[]) => any): void;\n  executeAsUser<T extends keyof typeof functionsToRegister>(\n    alias: T,\n    userId: string,\n    ...args: Parameters<typeof functionsToRegister[T]>\n  ): Promise<ReturnType<typeof functionsToRegister[T]>>;\n  executeForEveryone<T extends keyof typeof functionsToRegister>(\n    alias: T,\n    ...args: Parameters<typeof functionsToRegister[T]>\n  ): Promise<void>;\n}\ndeclare global {\n  const socketlib: SockerLib;\n}\n\nexport function registerFunctions(): void {\n  TokenAttractor.socket = socketlib.registerModule(MODULE_NAME);\n  for (const [alias, func] of Object.entries(functionsToRegister)) {\n    TokenAttractor.socket.register(alias, func);\n  }\n}\n","export function ensureDefined<T>(value: T | undefined | null, message: string): asserts value is T {\n  if (value === undefined || value === null) {\n    ui.notifications?.error(message);\n    throw new Error(message);\n  }\n}\n","import { ensureDefined } from './miscellaneous';\n\nfunction getPriority(user: User, actor: Actor): number {\n  let priority = 0;\n  if (user.character === actor) priority += 100;\n  if (actor.testUserPermission(user, 'OWNER')) priority += 10;\n  if (user.isGM) priority -= 1;\n  if (!user.active) priority -= 1000;\n  return priority;\n}\n\nexport default function highestPriorityUsers(actor: Actor): User[] {\n  ensureDefined(game.users, 'game not initialized');\n  const priorities = new Map(game.users.map((user) => [user, getPriority(user, actor)]));\n  const maxPriority = Math.max(...priorities.values());\n  return game.users.filter((user) => priorities.get(user) === maxPriority);\n}\n","import { registerSettings } from './settings.js';\nimport { registerHelpers } from './handlebars.js';\nimport { MODULE_NAME } from '../constants.js';\nimport Attractor from '../../scripts/attractor';\nimport { registerFunctions } from './socketkib';\nimport highestPriorityUsers from '../priorities';\n\nlet attractor: Attractor;\n\nexport function registerHooks(): void {\n  // Initialize module\n  Hooks.once('init', async () => {\n    console.log('token-attractor | Initializing token-attractor');\n\n    // Register custom module settings\n    registerSettings();\n\n    // register Handlebars helpers and partials\n    registerHelpers();\n  });\n\n  Hooks.on('renderTokenConfig', (app: any, html: any, data: any) => {\n    if (!game?.user?.isGM) return;\n    const toggleHTML = `<div class=\"form-group\">\n  <label>${game.i18n.localize('tokenAttractor.settings.isAttractor')}</label>\n  <input type=\"checkbox\" name=\"flags.${MODULE_NAME}.isAttractor\" data-dtype=\"Boolean\">\n</div>\n<div class=\"form-group\">\n  <label>${game.i18n.localize('tokenAttractor.settings.distanceAttraction')}</label>\n  <input type=\"text\" name=\"flags.${MODULE_NAME}.distanceAttraction\" data-dtype=\"\">\n</div>\n<div class=\"form-group\">\n  <label>${game.i18n.localize('tokenAttractor.settings.maxForceAttraction')}</label>\n  <input type=\"text\" name=\"flags.${MODULE_NAME}.maxForceAttraction\" data-dtype=\"\">\n</div>\n<div class=\"form-group\">\n  <label>${game.i18n.localize('tokenAttractor.settings.maxModifier')}</label>\n  <input type=\"text\" name=\"flags.${MODULE_NAME}.maxModifier\" data-dtype=\"\">\n</div>\n\n<div class=\"form-group\">\n  <label>${game.i18n.localize('tokenAttractor.settings.minForceAttraction')}</label>\n  <input type=\"text\" name=\"flags.${MODULE_NAME}.minForceAttraction\" data-dtype=\"\">\n</div>\n<div class=\"form-group\">\n  <label>${game.i18n.localize('tokenAttractor.settings.minModifier')}</label>\n  <input type=\"text\" name=\"flags.${MODULE_NAME}.minModifier\" data-dtype=\"\">\n</div>\n\n<div class=\"form-group\">\n  <label>${game.i18n.localize('tokenAttractor.settings.isAttracted')}</label>\n  <input type=\"checkbox\" name=\"flags.${MODULE_NAME}.isAttracted\" data-dtype=\"boolean\">\n</div>\n\n`;\n    const lockrotation = html.find(\"input[name='lockRotation']\");\n    const formGroup = lockrotation.closest('.form-group');\n    formGroup.after(toggleHTML);\n    html.find(`input[name ='flags.${MODULE_NAME}.isAttractor']`)[0].checked =\n      app.token.getFlag(MODULE_NAME, 'isAttractor') || false;\n    html.find(`input[name = 'flags.${MODULE_NAME}.distanceAttraction']`)[0].value =\n      app.token.getFlag(MODULE_NAME, 'distanceAttraction') || '';\n    html.find(`input[name ='flags.${MODULE_NAME}.isAttracted']`)[0].checked =\n      app.token.getFlag(MODULE_NAME, 'isAttracted') || false;\n    html.find(`input[name ='flags.${MODULE_NAME}.maxForceAttraction']`)[0].value =\n      app.token.getFlag(MODULE_NAME, 'maxForceAttraction') || '';\n    html.find(`input[name ='flags.${MODULE_NAME}.minForceAttraction']`)[0].value =\n      app.token.getFlag(MODULE_NAME, 'minForceAttraction') || '';\n    html.find(`input[name ='flags.${MODULE_NAME}.minModifier']`)[0].value =\n      app.token.getFlag(MODULE_NAME, 'minModifier') || '';\n    html.find(`input[name ='flags.${MODULE_NAME}.maxModifier']`)[0].value =\n      app.token.getFlag(MODULE_NAME, 'maxModifier') || '';\n  });\n\n  Hooks.on('canvasReady', () => {\n    if (!game?.user?.isGM) return;\n    attractor = new Attractor();\n  });\n\n  Hooks.on('canvasReady', () => {\n    if (!game?.user?.isGM) return;\n    if (!attractor) attractor = new Attractor();\n  });\n\n  Hooks.on('deleteCombat', async (combat: Combat) => {\n    attractor.createInterval();\n  });\n\n  Hooks.on('updateCombat', async (combat: Combat) => {\n    const timeout = setTimeout(async () => {\n      const combatant = combat?.combatant;\n      if (!combatant?.token?.object) return;\n      if (!attractor) attractor = new Attractor();\n      const isTokenAttracted: Token[] | boolean = attractor.isTokenAttracted(combatant?.token?.object as Token);\n      if (!isTokenAttracted) return;\n      if (!combatant?.actor) return;\n      const users = highestPriorityUsers(combatant.actor);\n      if (!users.length) return;\n      const combatantId: string | undefined = combatant?.id || undefined;\n\n      for (const attractorToken of isTokenAttracted) {\n        const modifier = attractor.getModifier(combatant?.token?.object as Token, attractorToken);\n        const result = await TokenAttractor.socket.executeAsUser(\n          'callForRoll',\n          users[0]?.id || '',\n          combatantId,\n          modifier,\n        );\n        if (!result) {\n          console.log('HE FALLADO');\n          attractor.attractCompute(combat?.combatant);\n        } else {\n          const margin: number = GURPS.lastTargetedRoll.margin;\n\n          // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n          // @ts-ignore\n          const currentMove = combatant?.actor?.data?.data?.currentmove || 6;\n          const restOfMovement = Math.min(margin, currentMove);\n          const round = game.combat?.round ?? 0;\n          debugger;\n          // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n          // @ts-ignore\n          window?.EasyCombat?.socket?.executeAsUser('addStoredMovement', users[0]?.id, restOfMovement, round);\n        }\n        clearTimeout(timeout);\n      }\n    }, 1000);\n  });\n\n  Hooks.once('socketlib.ready', registerFunctions);\n}\n","// Import TypeScript modules\nimport { registerHooks } from './util/setup/hooks.js';\nimport { SockerLibSocket } from './util/setup/socketkib.js';\n\nlet appId = '';\nappId = '3';\nconst globals = {\n  appId,\n};\n\ndeclare global {\n  const TokenAttractor: typeof globals & { socket: SockerLibSocket };\n  interface Window {\n    TokenAttractor: typeof globals;\n  }\n  interface LenientGlobalVariableTypes {\n    game: Game;\n  }\n}\n\nwindow.TokenAttractor = globals;\n\nregisterHooks();\n"],"names":[],"mappings":"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"}